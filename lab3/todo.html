<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Simple Todo</title>
    <style>
      body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; padding: 2rem; }
      input[type="text"] { padding: .5rem; width: 60%; }
      button { padding: .5rem .75rem; margin-left: .5rem; }
      ul { list-style: none; padding: 0; margin-top: 1rem; }
      li { display: flex; align-items: center; gap: .5rem; padding: .35rem 0; }
      li .task-text { cursor: pointer; }
      .done { text-decoration: line-through; color: #6b7280; }
    </style>
  </head>
  <body>
    <h1>simple Todo</h1>

    <div>
      <input id="taskInput" type="text" placeholder="Add a task and press Add or Enter" />
      <button id="addBtn">Add</button>
    </div>

    <ul id="taskList"></ul>

    <script>
      const input = document.getElementById('taskInput');
      const addBtn = document.getElementById('addBtn');
      const list = document.getElementById('taskList');

      const tasks = [];

      function renderTask(task) {
        const li = document.createElement('li');
        li.dataset.id = task.id;

        const cb = document.createElement('input');
        cb.type = 'checkbox';
        cb.checked = !!task.done;
        cb.addEventListener('change', () => {
          task.done = cb.checked;
          span.classList.toggle('done', task.done);
        });

        const span = document.createElement('span');
        span.textContent = task.text;
        span.className = 'task-text' + (task.done ? ' done' : '');
        // clicking the text deletes the task
        span.addEventListener('click', () => {
          const idx = tasks.findIndex(t => t.id === task.id);
          if (idx > -1) tasks.splice(idx, 1);
          li.remove();
        });

        li.appendChild(cb);
        li.appendChild(span);
        return li;
      }

      function addTask(text) {
        const trimmed = text.trim();
        if (!trimmed) return;
        const task = { id: Date.now() + Math.random(), text: trimmed, done: false };
        tasks.push(task);
        const el = renderTask(task);
        list.appendChild(el);
      }

      addBtn.addEventListener('click', () => {
        addTask(input.value);
        input.value = '';
        input.focus();
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          addTask(input.value);
          input.value = '';
        }
      });

      input.focus();
    </script>
  </body>
</html>
